<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Be My Valentine?</title>
    <link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Montserrat:wght@400;700&display=swap"
        rel="stylesheet">
    <style>
        :root {
            --primary-color: #ff69b4;
            /* Pink */
            --bg-color: #000000;
            /* Black */
            --text-color: #ffffff;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background-color: var(--bg-color);
            color: var(--text-color);
            font-family: 'Great Vibes', cursive;
            overflow: hidden;
            height: 100vh;
            width: 100vw;
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
        }

        /* Particle Container */
        #particles {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 10;
        }

        .heart-particle {
            position: absolute;
            top: -50px;
            font-size: 1.5rem;
            animation: fall linear forwards;
            opacity: 0.8;
            text-shadow: 0 0 5px rgba(255, 105, 180, 0.8);
        }

        @keyframes fall {
            to {
                transform: translateY(110vh) rotate(360deg);
                opacity: 0;
            }
        }

        .glitter {
            position: absolute;
            width: 4px;
            height: 4px;
            background: white;
            border-radius: 50%;
            box-shadow: 0 0 10px white, 0 0 20px var(--primary-color);
            animation: sparkle 1.5s infinite alternate;
            opacity: 0;
        }

        @keyframes sparkle {
            0% {
                transform: scale(0);
                opacity: 0;
            }

            50% {
                transform: scale(1);
                opacity: 1;
            }

            100% {
                transform: scale(0);
                opacity: 0;
            }
        }

        /* Slideshow */
        #slideshow {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 5;
        }

        .slide {
            position: absolute;
            max-width: 90%;
            max-height: 90%;
            opacity: 0;
            transition: opacity 1s ease-in-out, transform 4s linear;
            filter: drop-shadow(0 0 20px rgba(255, 105, 180, 0.5));
            border-radius: 15px;
            object-fit: contain;
        }

        .slide.active {
            opacity: 1;
            transform: scale(1.05);
            /* Slight zoom for romantic effect */
        }

        /* Question Section */
        #question-container {
            display: none;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 20;
            text-align: center;
            width: 100%;
            animation: fadeIn 2s ease;
        }

        h1 {
            font-size: 3.5rem;
            margin-bottom: 2rem;
            color: var(--primary-color);
            text-shadow: 0 0 10px rgba(255, 105, 180, 0.5);
            padding: 0 20px;
            line-height: 1.2;
        }

        .buttons {
            display: flex;
            gap: 2rem;
            margin-top: 1rem;
            position: relative;
            /* Context for absolute 'No' button later */
            width: 100%;
            height: 100px;
            justify-content: center;
            align-items: center;
        }

        button {
            padding: 15px 40px;
            font-size: 1.5rem;
            font-family: 'Montserrat', sans-serif;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            z-index: 21;
        }

        #yes-btn {
            background-color: var(--primary-color);
            color: white;
            box-shadow: 0 0 15px var(--primary-color);
        }

        #yes-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 0 25px var(--primary-color);
        }

        #no-btn {
            background-color: #333;
            color: #ccc;
            position: relative;
            /* Start relative so it aligns perfectly with Yes button */
        }

        /* Success Message */
        #success-container {
            display: none;
            text-align: center;
            z-index: 30;
            animation: fadeIn 1s ease;
            width: 90%;
            max-width: 800px;
        }

        .success-text {
            font-size: 3rem;
            color: var(--primary-color);
            text-shadow: 0 0 10px var(--primary-color);
            line-height: 1.4;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @media (max-width: 768px) {

            h1,
            .success-text {
                font-size: 2.5rem;
            }

            button {
                padding: 12px 30px;
                font-size: 1.2rem;
            }

            .buttons {
                gap: 1rem;
            }
        }
    </style>
</head>

<body>

    <!-- Background Music -->
    <!-- Ideally, replace 'placeholder_music_url' with your own local file or a reliable URL -->
    <audio id="bg-music" loop>
        <source src="https://s3.amazonaws.com/audio.musicbakery.com/demos/MusicBakery19930839gol.mp3" type="audio/mpeg">
        Your browser does not support the audio element.
    </audio>

    <div id="app">
        <!-- Overlay for particles -->
        <div id="particles"></div>

        <!-- Slideshow Container -->
        <div id="slideshow">
            <!-- Images will be injected here via JS -->
        </div>

        <!-- Question Container -->
        <div id="question-container">
            <h1>Will you wanna be my Valentine's date?</h1>
            <div class="buttons">
                <button id="yes-btn">Yes ðŸ’˜</button>
                <button id="no-btn">No ðŸ™ˆ</button>
            </div>
        </div>

        <!-- Success Container -->
        <div id="success-container">
            <h1 class="success-text" id="success-text"></h1>
        </div>
    </div>

    <script>
        // --- CONFIGURATION ---
        const imagePaths = [
            'IMG_6066.png',
            'IMG_0246.jpeg',
            'IMG_6067.png',
            '7ceb6a4a-4b94-421d-a6b6-def3ec13f1d3.jpeg',
            'IMG_0752.jpeg',
            'IMG_6064.png'
        ];

        const slideDuration = 4000; // 4 seconds
        const heartEmojis = ['ðŸ’•', 'â¤ï¸', 'ðŸ’—', 'ðŸ’–', 'ðŸ’˜'];

        // --- DOM ELEMENTS ---
        const slideshowContainer = document.getElementById('slideshow');
        const particlesContainer = document.getElementById('particles');
        const questionContainer = document.getElementById('question-container');
        const successContainer = document.getElementById('success-container');
        const successText = document.getElementById('success-text');
        const yesBtn = document.getElementById('yes-btn');
        const noBtn = document.getElementById('no-btn');
        const bgMusic = document.getElementById('bg-music');

        // --- STATE ---
        let currentSlide = 0;
        let musicStarted = false;

        // --- INIT ---
        function init() {
            // Load images
            imagePaths.forEach((path, index) => {
                const img = document.createElement('img');
                img.src = path;
                img.className = 'slide';
                if (index === 0) img.classList.add('active');
                slideshowContainer.appendChild(img);
            });

            startSlideshow();
            startParticles();

            // Attempt to start music
            attemptPlayMusic();

            // Add global listener to start music on first interaction if autoplay failed
            // We listen to both click and touchstart to capture mobile taps early
            const startMusicOnInteraction = () => {
                if (!musicStarted) {
                    bgMusic.play().then(() => {
                        musicStarted = true;
                        fadeInAudio(bgMusic);
                        // Remove listeners once started
                        document.body.removeEventListener('click', startMusicOnInteraction);
                        document.body.removeEventListener('touchstart', startMusicOnInteraction);
                    }).catch(e => console.log("Music play failed:", e));
                }
            };

            document.body.addEventListener('click', startMusicOnInteraction);
            document.body.addEventListener('touchstart', startMusicOnInteraction);
        }

        // --- MUSIC CONTROL ---
        function attemptPlayMusic() {
            bgMusic.volume = 0;
            bgMusic.play().then(() => {
                musicStarted = true;
                fadeInAudio(bgMusic);
            }).catch(error => {
                console.log("Autoplay prevented. Waiting for user interaction.");
            });
        }

        function fadeInAudio(audio) {
            let vol = 0;
            const interval = setInterval(() => {
                if (vol < 1) {
                    vol += 0.05;
                    // Cap at 1
                    audio.volume = Math.min(vol, 1);
                } else {
                    clearInterval(interval);
                }
            }, 200); // Fade in over ~4 seconds
        }

        function fadeOutAudio(audio) {
            let vol = audio.volume;
            const interval = setInterval(() => {
                if (vol > 0) {
                    vol -= 0.05;
                    audio.volume = Math.max(vol, 0);
                } else {
                    clearInterval(interval);
                    audio.pause();
                }
            }, 200); // Fade out over ~4 seconds
        }

        // --- SLIDESHOW ---
        function startSlideshow() {
            const slides = document.querySelectorAll('.slide');
            const totalSlides = slides.length;

            const interval = setInterval(() => {
                // Fade out current
                slides[currentSlide].classList.remove('active');

                // Next slide
                currentSlide++;

                if (currentSlide < totalSlides) {
                    slides[currentSlide].classList.add('active');
                } else {
                    // End of slideshow
                    clearInterval(interval);
                    endSlideshow();
                }
            }, slideDuration);
        }

        function endSlideshow() {
            slideshowContainer.style.transition = "opacity 2s ease";
            slideshowContainer.style.opacity = "0";

            setTimeout(() => {
                slideshowContainer.style.display = 'none';
                showQuestion();
            }, 2000);
        }

        // --- PARTICLES ---
        function startParticles() {
            // Heart rain
            setInterval(() => {
                createHeart();
            }, 300);

            // Glitter effect (random sparkles)
            setInterval(() => {
                createGlitter();
            }, 200);
        }

        function createHeart() {
            const heart = document.createElement('div');
            heart.classList.add('heart-particle');
            heart.innerText = heartEmojis[Math.floor(Math.random() * heartEmojis.length)];
            heart.style.left = Math.random() * 100 + 'vw';
            heart.style.animationDuration = (Math.random() * 3 + 2) + 's'; // 2-5s fall
            heart.style.fontSize = (Math.random() * 1 + 1) + 'rem';

            particlesContainer.appendChild(heart);

            // Cleanup
            setTimeout(() => {
                heart.remove();
            }, 6000);
        }

        function createGlitter() {
            const glitter = document.createElement('div');
            glitter.classList.add('glitter');
            glitter.style.top = Math.random() * 100 + 'vh';
            glitter.style.left = Math.random() * 100 + 'vw';
            glitter.style.backgroundColor = Math.random() > 0.5 ? '#fff' : '#ffd1dc';

            particlesContainer.appendChild(glitter);

            setTimeout(() => {
                glitter.remove();
            }, 1500);
        }

        // --- QUESTION INTERACTION ---
        function showQuestion() {
            questionContainer.style.display = 'flex';
        }

        // Runaway 'No' Button logic
        function moveNoButton() {
            // If it's still relative (first move), force it to fixed/absolute now
            if (getComputedStyle(noBtn).position !== 'fixed') {
                noBtn.style.position = 'fixed';
                // Initially ensure it stays roughly where it was or jump immediately
                // Strategy: Just jump immediately on first interaction to avoid complexity of matching coordinates
            }

            // Move within the viewport but keep visible
            const x = Math.random() * (window.innerWidth - noBtn.offsetWidth - 40) + 20;
            const y = Math.random() * (window.innerHeight - noBtn.offsetHeight - 40) + 20;

            noBtn.style.left = `${x}px`;
            noBtn.style.top = `${y}px`;
        }

        noBtn.addEventListener('mouseover', moveNoButton);
        noBtn.addEventListener('touchstart', (e) => {
            e.preventDefault();
            moveNoButton();
        });
        noBtn.addEventListener('click', (e) => {
            e.preventDefault();
            moveNoButton();
        });

        // 'Yes' Button Logic
        yesBtn.addEventListener('click', () => {
            // Hide question
            questionContainer.style.display = 'none';

            // Show Success - Phase 1
            startSuccessSequence();
        });

        // --- SUCCESS SEQUENCE ---
        function startSuccessSequence() {
            successContainer.style.display = 'block';

            // Phase 1 (0-5s)
            successText.innerText = "Yaaay! ðŸ¥° I can't wait!";

            // Phase 2 (5s-20s) -> starts after 5s
            setTimeout(() => {
                successText.style.opacity = 0; // fade out briefly
                setTimeout(() => {
                    successText.innerText = "Now be my brave girl and go in your room, open the right door of your wardrobe and show me that you are a good girl";
                    successText.style.fontSize = "2rem"; // Slightly smaller for longer text
                    successText.style.opacity = 1;
                }, 1000);
            }, 5000);

            // Finale (20s+) -> Fade to black & Stop Music
            setTimeout(() => {
                // Fade out screen
                document.body.style.transition = "background-color 2s ease";
                document.body.style.backgroundColor = "black";
                document.getElementById('app').style.transition = "opacity 2s ease";
                document.getElementById('app').style.opacity = "0";

                // Fade out music
                fadeOutAudio(bgMusic);

            }, 20000);
        }

        // Init
        window.addEventListener('load', init);

    </script>
</body>

</html>